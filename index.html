<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì»¤ë®¤ë‹ˆí‹° - MyBoard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'ë‹ì›€', Dotum, sans-serif;
            background-color: #f5f5f5;
        }
        
        /* í—¤ë” */
        header {
            background-color: #fff;
            border-bottom: 2px solid #333;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        header h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .header-right {
            text-align: right;
        }
        
        .login-status {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .auth-buttons button {
            padding: 6px 15px;
            font-size: 13px;
        }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ */
        nav {
            background-color: #fff;
            padding: 10px 20px;
            border-bottom: 1px solid #ddd;
        }
        
        nav a {
            display: inline-block;
            padding: 8px 15px;
            margin-right: 10px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            text-decoration: none;
            color: #333;
            border-radius: 4px;
            cursor: pointer;
        }
        
        nav a:hover {
            background-color: #e0e0e0;
        }
        
        nav a.active {
            background-color: #333;
            color: #fff;
        }
        
        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 15px;
        }
        
        /* ë²„íŠ¼ */
        button {
            padding: 8px 20px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background-color: #555;
        }
        
        /* ê¸€ì“°ê¸° ë²„íŠ¼ */
        .write-btn-area {
            text-align: right;
            margin-bottom: 20px;
        }
        
        /* ê²Œì‹œê¸€ ëª©ë¡ */
        .post-list {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .post-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .post-item:hover {
            background-color: #f9f9f9;
        }
        
        .post-item:last-child {
            border-bottom: none;
        }
        
        .post-info {
            flex: 1;
        }
        
        .post-title {
            font-weight: bold;
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
        }
        
        .post-meta {
            font-size: 12px;
            color: #999;
        }
        
        .post-stats {
            text-align: right;
            font-size: 12px;
            color: #666;
        }
        
        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .modal-header {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .modal-close {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }
        
        .modal-close:hover {
            color: #333;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 150px;
        }
        
        .modal-buttons {
            text-align: right;
            margin-top: 20px;
        }
        
        .modal-buttons button {
            margin-left: 10px;
        }
        
        .cancel-btn {
            background-color: #999;
        }
        
        .cancel-btn:hover {
            background-color: #777;
        }
        
        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
        }
        
        .pagination a, .pagination span {
            padding: 8px 12px;
            margin: 0 4px;
            border: 1px solid #ddd;
            background-color: #fff;
            text-decoration: none;
            color: #333;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .pagination a:hover {
            background-color: #f0f0f0;
        }
        
        .pagination .active {
            background-color: #333;
            color: #fff;
            border-color: #333;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header>
        <div>
            <h1>ğŸš€ ê¹€ì‹œí™˜ ì»¤ë®¤ë‹ˆí‹°</h1>
            <p style="color: #666; font-size: 14px;">ììœ ë¡­ê²Œ ì´ì•¼ê¸°í•˜ê³  ì •ë³´ë¥¼ ë‚˜ëˆ„ëŠ” ê³µê°„</p>
        </div>
        <div class="header-right">
            <div class="login-status" id="loginStatus">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</div>
            <div class="auth-buttons">
                <button id="signupBtn" onclick="openSignupModal()">íšŒì›ê°€ì…</button>
                <button id="loginBtn" onclick="openLoginModal()">ë¡œê·¸ì¸</button>
                <button id="logoutBtn" onclick="logout()" style="display: none; background-color: #999;">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </header>
    
    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav>
        <a href="#" class="nav-link active" onclick="switchBoard('free')">ììœ ê²Œì‹œíŒ</a>
        <a href="#" class="nav-link" onclick="switchBoard('gallery')">ê°¤ëŸ¬ë¦¬</a>
        <a href="#" class="nav-link" onclick="switchBoard('qna')">Q&A</a>
        <a href="#" class="nav-link" onclick="switchBoard('notice')">ê³µì§€ì‚¬í•­</a>
    </nav>
    
    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container">
        <!-- ê²Œì‹œíŒ ëª©ë¡ ë·° -->
        <div id="listView">
            <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
            <div class="write-btn-area">
                <button onclick="openWriteModal()">âœï¸ ê¸€ì“°ê¸°</button>
            </div>
            
            <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
            <div class="post-list" id="postList">
                <!-- ê²Œì‹œê¸€ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div class="pagination">
                <span class="active">1</span>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">ë‹¤ìŒ</a>
            </div>
        </div>
        
        <!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ë·° -->
        <div id="detailView" style="display: none;">
            <button onclick="backToList()" style="margin-bottom: 20px;">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            <button id="deletePostBtn" onclick="deletePost(currentViewingPostId)" style="margin-bottom: 20px; margin-left: 10px; background-color: #d9534f; display: none;">ğŸ—‘ï¸ ê¸€ ì‚­ì œ</button>
            
            <div style="background-color: #fff; padding: 20px; border-radius: 4px; border: 1px solid #ddd;">
                <div style="border-bottom: 2px solid #ddd; padding-bottom: 15px; margin-bottom: 15px;">
                    <h2 id="detailTitle" style="margin-bottom: 10px;"></h2>
                    <div style="color: #666; font-size: 14px;">
                        ì‘ì„±ì: <span id="detailAuthor"></span> | 
                        ì‘ì„±ì¼: <span id="detailDate"></span> | 
                        ì¡°íšŒ: <span id="detailViews"></span>
                    </div>
                </div>
                
                <div id="detailContent" style="padding: 20px 0; font-size: 15px; line-height: 1.6; min-height: 200px;"></div>
                
                <div style="border-top: 2px solid #ddd; padding-top: 20px; margin-top: 30px;">
                    <h3 style="margin-bottom: 15px;">ëŒ“ê¸€ (<span id="commentCount">0</span>)</h3>
                    
                    <!-- ëŒ“ê¸€ ì…ë ¥ -->
                    <div style="margin-bottom: 20px;">
                        <input type="text" id="commentAuthor" placeholder="ë‹‰ë„¤ì„" style="width: 20%; padding: 8px; margin-right: 5px;">
                        <input type="text" id="commentText" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 75%; padding: 8px;">
                        <button onclick="addComment()" style="margin-left: 5px; padding: 8px 15px;">ë“±ë¡</button>
                    </div>
                    
                    <!-- ëŒ“ê¸€ ëª©ë¡ -->
                    <div id="commentList"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
    <div id="writeModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeWriteModal()">&times;</span>
            <div class="modal-header">ìƒˆ ê¸€ ì‘ì„±</div>
            
            <form id="writeForm">
                <div class="form-group">
                    <label>ê²Œì‹œíŒ</label>
                    <select id="boardSelect">
                        <option>ììœ ê²Œì‹œíŒ</option>
                        <option>ê°¤ëŸ¬ë¦¬</option>
                        <option>Q&A</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ì œëª© *</label>
                    <input type="text" id="postTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="form-group">
                    <label>ë‹‰ë„¤ì„</label>
                    <input type="text" id="postNickname" placeholder="ë¡œê·¸ì¸ í›„ ì‚¬ìš©" value="" disabled>
                    <small style="color: #999; display: block; margin-top: 5px;" id="nicknameNote">ë¡œê·¸ì¸ì„ í•˜ë©´ ë‹‰ë„¤ì„ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                </div>
                
                <div class="form-group">
                    <label>ë‚´ìš© *</label>
                    <textarea id="postContent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
                
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeWriteModal()">ì·¨ì†Œ</button>
                    <button type="submit">ë“±ë¡</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="modal-close" onclick="closeLoginModal()">&times;</span>
            <div class="modal-header">ë¡œê·¸ì¸</div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label>ì•„ì´ë””</label>
                    <input type="text" id="userId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="userPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeLoginModal()">ì·¨ì†Œ</button>
                    <button type="submit">ë¡œê·¸ì¸</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="signupModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="modal-close" onclick="closeSignupModal()">&times;</span>
            <div class="modal-header">íšŒì›ê°€ì…</div>
            
            <form id="signupForm">
                <div class="form-group">
                    <label>ì•„ì´ë””</label>
                    <input type="text" id="signupUserId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                    <small style="color: #999; display: block; margin-top: 3px;" id="userIdError"></small>
                </div>
                
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="signupPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" id="signupPasswordCheck" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”" required>
                    <small style="color: #999; display: block; margin-top: 3px;" id="passwordError"></small>
                </div>
                
                <div class="form-group">
                    <label>ë‹‰ë„¤ì„</label>
                    <input type="text" id="signupNickname" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeSignupModal()">ì·¨ì†Œ</button>
                    <button type="submit">íšŒì›ê°€ì…</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // ì´ˆê¸° ê²Œì‹œê¸€ ë°ì´í„° (ë¹ˆ ë°°ì—´ë¡œ ì‹œì‘)
        let posts = [];
        let currentBoard = "free";
        let currentViewingPostId = null;
        let currentUser = null; // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´
        
        // íšŒì› ë°ì´í„°ë² ì´ìŠ¤
        let users = [
            {
                id: "admin",
                password: "hellohello1927",
                nickname: "ê´€ë¦¬ì",
                isAdmin: true
            }
        ];
        
        // í˜ì´ì§€ ì´ˆê¸°í™”
        function init() {
            renderPosts();
            updateAuthUI();
        }
        
        // íšŒì›ê°€ì… ëª¨ë‹¬ ì—´ê¸°
        function openSignupModal() {
            document.getElementById("signupModal").style.display = "block";
            clearSignupErrors();
        }
        
        // íšŒì›ê°€ì… ëª¨ë‹¬ ë‹«ê¸°
        function closeSignupModal() {
            document.getElementById("signupModal").style.display = "none";
            document.getElementById("signupForm").reset();
            clearSignupErrors();
        }
        
        // íšŒì›ê°€ì… ì—ëŸ¬ ë©”ì‹œì§€ ì´ˆê¸°í™”
        function clearSignupErrors() {
            document.getElementById("userIdError").textContent = "";
            document.getElementById("passwordError").textContent = "";
        }
        
        // íšŒì›ê°€ì… ì²˜ë¦¬
        document.getElementById("signupForm").addEventListener("submit", function(e) {
            e.preventDefault();
            clearSignupErrors();
            
            // ì´ë¯¸ ì´ ë¸Œë¼ìš°ì €ì—ì„œ ê³„ì •ì„ ë§Œë“¤ì—ˆëŠ”ì§€ í™•ì¸
            if (localStorage.getItem("hasSignedUp")) {
                alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì´ë¯¸ ê³„ì •ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.\në‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.");
                return;
            }
            
            const userId = document.getElementById("signupUserId").value;
            const password = document.getElementById("signupPassword").value;
            const passwordCheck = document.getElementById("signupPasswordCheck").value;
            const nickname = document.getElementById("signupNickname").value;
            
            // ê²€ì¦
            if (users.find(u => u.id === userId)) {
                document.getElementById("userIdError").textContent = "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.";
                return;
            }
            
            if (password !== passwordCheck) {
                document.getElementById("passwordError").textContent = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                return;
            }
            
            if (password.length < 4) {
                document.getElementById("passwordError").textContent = "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.";
                return;
            }
            
            // íšŒì› ì¶”ê°€
            users.push({
                id: userId,
                password: password,
                nickname: nickname,
                isAdmin: false
            });
            
            // localStorageì— íšŒì›ê°€ì… ì—¬ë¶€ ì €ì¥
            localStorage.setItem("hasSignedUp", "true");
            
            alert("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
            closeSignupModal();
        });
        
        // ë¡œê·¸ì¸ ëª¨ë‹¬ ì—´ê¸°
        function openLoginModal() {
            document.getElementById("loginModal").style.display = "block";
        }
        
        // ë¡œê·¸ì¸ ëª¨ë‹¬ ë‹«ê¸°
        function closeLoginModal() {
            document.getElementById("loginModal").style.display = "none";
            document.getElementById("loginForm").reset();
        }
        
        // ë¡œê·¸ì¸ ì²˜ë¦¬
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            e.preventDefault();
            
            const userId = document.getElementById("userId").value;
            const userPassword = document.getElementById("userPassword").value;
            
            // íšŒì› í™•ì¸
            const user = users.find(u => u.id === userId);
            
            if (!user) {
                alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.");
                return;
            }
            
            if (user.password !== userPassword) {
                alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                return;
            }
            
            // ë¡œê·¸ì¸ ì„±ê³µ
            currentUser = {
                id: user.id,
                nickname: user.nickname,
                isAdmin: user.isAdmin || false
            };
            
            closeLoginModal();
            updateAuthUI();
            alert(`í™˜ì˜í•©ë‹ˆë‹¤, ${user.nickname}ë‹˜!`);
        });
        
        // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
        function logout() {
            currentUser = null;
            updateAuthUI();
            alert("ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
        
        // ì¸ì¦ UI ì—…ë°ì´íŠ¸
        function updateAuthUI() {
            const loginStatus = document.getElementById("loginStatus");
            const signupBtn = document.getElementById("signupBtn");
            const loginBtn = document.getElementById("loginBtn");
            const logoutBtn = document.getElementById("logoutBtn");
            const postNickname = document.getElementById("postNickname");
            const nicknameNote = document.getElementById("nicknameNote");
            
            if (currentUser) {
                loginStatus.textContent = `${currentUser.nickname}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤`;
                signupBtn.style.display = "none";
                loginBtn.style.display = "none";
                logoutBtn.style.display = "inline-block";
                
                // ê¸€ì“°ê¸° ëª¨ë‹¬ì—ì„œ ë‹‰ë„¤ì„ í•„ë“œ í™œì„±í™”
                postNickname.disabled = false;
                postNickname.value = currentUser.nickname;
                postNickname.placeholder = currentUser.nickname;
                nicknameNote.style.display = "none";
            } else {
                loginStatus.textContent = "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤";
                signupBtn.style.display = "inline-block";
                loginBtn.style.display = "inline-block";
                logoutBtn.style.display = "none";
                
                // ê¸€ì“°ê¸° ëª¨ë‹¬ì—ì„œ ë‹‰ë„¤ì„ í•„ë“œ ë¹„í™œì„±í™”
                postNickname.disabled = true;
                postNickname.value = "";
                postNickname.placeholder = "ë¡œê·¸ì¸ í›„ ì‚¬ìš©";
                nicknameNote.style.display = "block";
            }
        }
        
        // ê²Œì‹œê¸€ ë Œë”ë§
        function renderPosts() {
            const postList = document.getElementById("postList");
            const filteredPosts = posts.filter(post => post.board === currentBoard);
            
            if (filteredPosts.length === 0) {
                postList.innerHTML = '<div style="padding: 40px; text-align: center; color: #999;">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            postList.innerHTML = filteredPosts.map(post => `
                <div class="post-item" style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="flex: 1; cursor: pointer; padding: 15px; display: flex; justify-content: space-between; align-items: center; width: 100%;" onclick="viewPost(${post.id})">
                        <div class="post-info">
                            <div class="post-title">${post.title}</div>
                            <div class="post-meta">${post.author} | ${post.date}</div>
                        </div>
                        <div class="post-stats">
                            ì¡°íšŒ: ${post.views} | ëŒ“ê¸€: ${post.comments.length}
                        </div>
                    </div>
                    ${currentUser && currentUser.isAdmin ? `<button onclick="deletePost(${post.id})" style="margin: 0 10px; background-color: #d9534f; padding: 6px 12px; font-size: 12px;">ì‚­ì œ</button>` : ""}
                </div>
            `).join("");
        }
        
        // ê²Œì‹œíŒ ì „í™˜
        function switchBoard(board) {
            currentBoard = board;
            
            // ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll(".nav-link").forEach(link => {
                link.classList.remove("active");
            });
            event.target.classList.add("active");
            
            renderPosts();
        }
        
        // ê¸€ì“°ê¸° ëª¨ë‹¬ ì—´ê¸°
        function openWriteModal() {
            if (!currentUser) {
                alert("ë¡œê·¸ì¸ í›„ ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                openLoginModal();
                return;
            }
            document.getElementById("writeModal").style.display = "block";
        }
        
        // ê¸€ì“°ê¸° ëª¨ë‹¬ ë‹«ê¸°
        function closeWriteModal() {
            document.getElementById("writeModal").style.display = "none";
            document.getElementById("writeForm").reset();
            if (currentUser) {
                document.getElementById("postNickname").value = currentUser.nickname;
            }
        }
        
        // ê¸€ ì œì¶œ
        document.getElementById("writeForm").addEventListener("submit", function(e) {
            e.preventDefault();
            
            const newPost = {
                id: posts.length > 0 ? Math.max(...posts.map(p => p.id)) + 1 : 1,
                title: document.getElementById("postTitle").value,
                author: currentUser ? currentUser.nickname : "ìµëª…",
                date: new Date().toLocaleString('ko-KR'),
                views: 0,
                board: currentBoard,
                content: document.getElementById("postContent").value,
                comments: []
            };
            
            posts.unshift(newPost);
            renderPosts();
            closeWriteModal();
            alert("ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
        });
        
        // ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
        function viewPost(id) {
            const post = posts.find(p => p.id === id);
            if (!post) return;
            
            currentViewingPostId = id;
            post.views += 1; // ì¡°íšŒìˆ˜ ì¦ê°€
            
            // ìƒì„¸ë³´ê¸° ë·°ì— ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById("detailTitle").textContent = post.title;
            document.getElementById("detailAuthor").textContent = post.author;
            document.getElementById("detailDate").textContent = post.date;
            document.getElementById("detailViews").textContent = post.views;
            document.getElementById("detailContent").textContent = post.content;
            document.getElementById("commentCount").textContent = post.comments.length;
            
            renderComments(post);
            
            // ì–´ë“œë¯¼ ì‚­ì œ ë²„íŠ¼
            const deleteBtn = document.getElementById("deletePostBtn");
            if (currentUser && currentUser.isAdmin) {
                deleteBtn.style.display = "inline-block";
            } else {
                deleteBtn.style.display = "none";
            }
            
            // ë·° ì „í™˜
            document.getElementById("listView").style.display = "none";
            document.getElementById("detailView").style.display = "block";
        }
        
        // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function backToList() {
            document.getElementById("listView").style.display = "block";
            document.getElementById("detailView").style.display = "none";
            renderPosts(); // ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ ë°˜ì˜
        }
        
        // ê²Œì‹œê¸€ ì‚­ì œ
        function deletePost(id) {
            if (!currentUser || !currentUser.isAdmin) {
                alert("ê´€ë¦¬ìë§Œ ê¸€ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return;
            }
            
            if (confirm("ì •ë§ ì´ ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                posts = posts.filter(post => post.id !== id);
                alert("ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                backToList();
            }
        }
        
        // ëŒ“ê¸€ ë Œë”ë§
        function renderComments(post) {
            const commentList = document.getElementById("commentList");
            
            if (post.comments.length === 0) {
                commentList.innerHTML = '<div style="color: #999; padding: 20px; text-align: center;">ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            commentList.innerHTML = post.comments.map((comment, index) => `
                <div style="padding: 10px; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                    <div style="font-weight: bold; color: #333;">${comment.author}</div>
                    <div style="color: #666; font-size: 12px; margin-bottom: 5px;">${comment.date}</div>
                    <div style="padding: 5px 0;">${comment.text}</div>
                </div>
            `).join("");
        }
        
        // ëŒ“ê¸€ ì¶”ê°€
        function addComment() {
            const author = currentUser ? currentUser.nickname : "ìµëª…";
            const text = document.getElementById("commentText").value;
            
            if (!text.trim()) {
                alert("ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”");
                return;
            }
            
            const post = posts.find(p => p.id === currentViewingPostId);
            if (!post) return;
            
            post.comments.push({
                author: author,
                text: text,
                date: new Date().toLocaleString('ko-KR')
            });
            
            document.getElementById("commentAuthor").value = currentUser ? currentUser.nickname : "";
            document.getElementById("commentText").value = "";
            document.getElementById("commentCount").textContent = post.comments.length;
            
            renderComments(post);
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const writeModal = document.getElementById("writeModal");
            const loginModal = document.getElementById("loginModal");
            const signupModal = document.getElementById("signupModal");
            if (event.target === writeModal) {
                writeModal.style.display = "none";
            }
            if (event.target === loginModal) {
                loginModal.style.display = "none";
            }
            if (event.target === signupModal) {
                signupModal.style.display = "none";
            }
        }
        
        // ëŒ“ê¸€ ì°½ì— ê¸°ë³¸ê°’ ì„¤ì •
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("commentAuthor").addEventListener("focus", function() {
                if (currentUser && this.value === "") {
                    this.value = currentUser.nickname;
                }
            });
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        init();
    </script>
</body>
</html>